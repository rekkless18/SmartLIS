# SmartLis 智能实验室管理系统需求文档

## 1. 产品概述

SmartLis 是一个面向企业研发实验室、高校实验室、科研机构实验室的智能化管理系统。通过"数字化 + 智能化"手段，重构实验室管理流程，提升管理效率和安全性。

### 1.1 系统愿景

* **核心目标**：通过数字化和智能化手段，重构实验室管理流程

* **服务对象**：企业研发实验室、高校实验室、科研机构实验室

* **价值主张**：提升实验室管理效率，降低安全风险，实现数据价值最大化

### 1.2 核心问题

SmartLis 针对性解决传统实验室管理的5大核心痛点：

1. **资源管理混乱**：设备、耗材、场地等资源缺乏统一管理
2. **流程效率低下**：业务流程不规范，审批环节冗长
3. **安全风险失控**：缺乏有效的安全监控和预警机制
4. **数据无法复用**：实验数据分散存储，难以有效利用
5. **角色权限模糊**：用户权限管理不清晰，存在安全隐患

## 2. 用户角色定义

| 角色      | 职责描述           | 核心权限                |
| ------- | -------------- | ------------------- |
| 管理员     | 系统管理、用户管理、权限配置 | 系统配置、用户管理、数据导出、全局查看 |
| 研发工程师   | 送检申请、进度查询、报告下载 | 送检申请、进度查看、报告下载、数据查询 |
| 实验员     | 样本处理、实验执行、数据录入 | 样本管理、实验操作、数据录入、设备使用 |
| 设备维护工程师 | 设备维护、故障处理、保养计划 | 设备管理、维护记录、故障处理、保养计划 |

## 3. 功能模块设计

### 3.1 首页模块

#### 3.1.1 业务数据看板

* **关键指标展示**：送检量统计、实验通过率、报告及时率

* **实时监控**：当日送检数量、实验进度、报告完成情况

* **数据概览**：月度/季度业务数据汇总展示

* **异常提醒**：超时预警、异常数据标记、紧急事项提示

#### 3.1.2 趋势分析

* **时间维度分析**：月度数据变化趋势、季度对比分析

* **业务指标趋势**：送检量趋势、通过率变化、时效性分析

* **预测分析**：基于历史数据的业务量预测

* **图表展示**：多种图表形式展示趋势数据

#### 3.1.3 通知整合中心

* **送检进度通知**：送检状态变更提醒、进度节点通知

* **实验异常通知**：实验过程异常、数据异常提醒

* **报告审核通知**：报告待审核、审核完成通知

* **库存预警通知**：耗材库存不足、设备维护提醒

### 3.2 送检管理模块

#### 3.2.1 送检申请

* **基础信息填写**：送检编码、姓名、性别、年龄信息录入

* **检测产品选择**：支持多选检测产品、加急标识设置

* **材料上传管理**：样本说明文档、委托协议上传

* **申请提交审核**：申请信息验证、提交流程管理

#### 3.2.2 送检进度查询

* **进度可视化展示**：已提交→已到样→实验中→已出报告流程图

* **状态管理**：样本异常/停测/取消状态处理

* **操作权限控制**：实验前支持取消送检、样本审核前支持编辑

* **异常反馈机制**：样本审核中异常登记、异常信息反馈

#### 3.2.3 报告交付

* **报告下载服务**：已完成报告的下载功能

* **交付状态跟踪**：报告交付状态、交付时间记录

* **历史记录查询**：历史报告查询、下载记录管理

### 3.3 样本管理模块

#### 3.3.1 样本接收

* **接收校验机制**：与送检申请信息比对验证

* **异常登记处理**：样本破损、信息不符异常记录

* **接收流程管理**：样本接收确认、信息核对

* **条码生成管理**：样本唯一标识生成、标签打印

#### 3.3.2 样本查询

* **多维度筛选**：按送检单号、样本类型、接收日期、处理状态筛选

* **存储位置管理**：样本存储位置记录、查询定位

* **状态管理功能**：支持停测操作、超时预警提醒

* **批量操作支持**：批量查询、批量状态更新

#### 3.3.3 样本出库

* **出库申请流程**：选择样本、申请出库、审批流程

* **实验关联**：出库后自动进入实验流程

* **出库记录管理**：出库时间、操作人员、目标实验记录

#### 3.3.4 样本入库

* **入库选择机制**：根据出库单选择部分入库/全部入库

* **入库状态更新**：样本状态自动更新、库存位置记录

* **入库记录管理**：入库时间、数量、操作记录

#### 3.3.5 样本销毁

* **异常销毁流程**：手动选择样本、异常原因记录、销毁确认

* **到期销毁管理**：基于系统设置的销毁时间自动提醒

* **销毁记录档案**：销毁时间、原因、操作人员记录

#### 3.3.6 样本审核

* **审核流程管理**：样本接收后的送检单及实物样本审核

* **异常登记功能**：审核过程中发现的异常情况记录

* **审核标准配置**：审核标准设定、审核流程配置

### 3.4 普检实验管理模块

#### 3.4.1 普检实验

* **设备对接功能**：与实验设备自动对接获取结果数据

* **手动录入支持**：支持手动填写实验结果数据

* **耗材自动关联**：实验过程自动扣减相关耗材库存

* **实验记录管理**：实验过程记录、操作日志管理

#### 3.4.2 普检数据审核

* **审核标准配置**：预设合格阈值、审核规则设定

* **异常自动标记**：自动识别超出阈值的异常数据

* **审核意见记录**：结构化意见模板、审核结果记录

* **审核流程管理**：多级审核、审核权限控制

#### 3.4.3 普检实验异常中心

* **异常数据处理**：重新实验、出报告、终止、重采血选项

* **异常原因分析**：异常原因记录、分析报告生成

* **处理流程跟踪**：异常处理进度、结果反馈

### 3.5 质谱实验管理模块

#### 3.5.1 质谱实验

* **设备对接功能**：与质谱设备自动对接获取结果数据

* **手动录入支持**：支持手动填写质谱实验结果

* **耗材自动关联**：质谱实验过程自动扣减相关耗材库存

* **实验记录管理**：质谱实验过程记录、数据管理

#### 3.5.2 质谱数据审核

* **审核标准配置**：质谱数据合格阈值、审核规则设定

* **异常自动标记**：自动识别质谱数据异常情况

* **审核意见记录**：质谱数据审核意见模板、结果记录

* **质控管理**：质谱实验质量控制、数据可靠性验证

#### 3.5.3 质谱实验异常中心

* **异常数据处理**：质谱异常数据的重新实验、出报告、终止、重采血

* **异常原因分析**：质谱异常原因记录、技术分析

* **处理结果跟踪**：质谱异常处理进度、结果反馈

### 3.6 特检实验管理模块

#### 3.6.1 湿实验

* **设备对接功能**：与湿实验设备自动对接获取结果

* **手动录入支持**：支持手动填写湿实验结果数据

* **耗材自动关联**：湿实验过程自动扣减相关耗材库存

* **实验环境监控**：湿实验环境参数监控、记录

#### 3.6.2 上机管理

* **上机预约系统**：与设备管理模块联动，避免预约冲突

* **上机进度跟踪**：上机实验进度实时跟踪、状态更新

* **仪器日志同步**：从设备管理模块获取仪器运行日志

* **上机记录管理**：上机时间、操作人员、实验参数记录

#### 3.6.3 分析解读

* **参考数据库关联**：行业标准值、历史案例数据关联

* **多人协同解读**：支持多专家协同分析、意见合并

* **解读模板管理**：标准化解读模板、个性化配置

* **解读结果管理**：解读结果记录、版本控制

#### 3.6.4 特检实验异常中心

* **异常数据处理**：特检异常数据的重新实验、解除异常、终止、重采血

* **异常等级分类**：按异常严重程度分类处理

* **专家会诊机制**：复杂异常情况的专家会诊流程

### 3.7 报告管理模块

#### 3.7.1 报告编辑

* **模板初始化**：基于报告模板自动初始化报告结构

* **结构化编辑工具**：支持富文本编辑、格式化工具

* **数据自动关联**：自动关联实验数据，避免手动录入错误

* **异常登记功能**：报告编辑过程中的异常情况登记

#### 3.7.2 报告生成

* **批量生成功能**：同批次实验报告批量生成

* **格式转换支持**：支持PDF/Word等多种格式生成

* **数据自动填充**：从实验模块自动同步填充数据

* **生成异常处理**：报告生成过程异常登记、处理

#### 3.7.3 报告审核

* **审核流程管理**：多级审核流程、审核权限控制

* **审核完成交付**：审核通过后自动进入交付流程

* **审核异常登记**：审核过程中发现的异常情况记录

* **审核意见管理**：审核意见记录、修改建议管理

#### 3.7.4 报告交付管理

* **交付时效统计**：从样本接收到报告交付的完整时长统计

* **交付状态跟踪**：报告交付状态实时跟踪、确认机制

* **撤回功能**：已交付报告的撤回功能、撤回原因记录

* **交付记录档案**：完整的交付记录、客户确认信息

#### 3.7.5 报告异常中心

* **异常数据处理**：报告环节异常的重新实验、解除异常、终止、重采血

* **异常分类管理**：按异常类型分类处理、优先级设定

* **异常处理跟踪**：异常处理全流程跟踪、结果反馈

### 3.8 实验室管理模块

#### 3.8.1 设备管理

* **设备台账管理**：设备型号、采购日期、供应商、保修期限等基础信息

* **预约使用记录**：与实验模块联动的设备预约、使用记录管理

* **维护计划管理**：定期保养提醒、维护计划制定执行

* **校准记录管理**：校准证书上传、下次校准时间预警

* **状态监控系统**：设备运行/空闲/故障/维护中状态，支持大屏可视化

* **报废管理流程**：设备报废审批流程、残值记录管理

#### 3.8.2 耗材管理

* **分类规格管理**：按用途/危险等级分类、规格标准化管理

* **供应商管理**：供应商资质审核、合作评价、采购记录

* **库存预警系统**：低于阈值自动提醒、补货建议

* **领用归还管理**：关联实验任务、支持扫码领用、归还记录

* **有效期管理**：耗材有效期跟踪、近效期提醒功能

### 3.9 环境管理模块

#### 3.9.1 实验室总览

* **区域地图可视化**：各实验室/功能区分布的可视化地图

* **实时状态看板**：人员数量、设备运行数、环境参数实时展示

* **区域状态监控**：各区域运行状态、异常情况实时监控

* **资源分布统计**：设备、人员、实验分布情况统计

#### 3.9.2 环境参数监控

* **实时数据采集**：温湿度、洁净度、气压、有害气体浓度等参数采集

* **传感器对接**：与各类环境传感器设备对接集成

* **历史数据展示**：环境参数历史数据曲线展示、趋势分析

* **自动报警系统**：参数超标自动报警、声光/短信通知

### 3.10 用户权限管理模块

#### 3.10.1 账号管理

* **账号生命周期**：账号新建/注销、状态管理

* **密码安全管理**：密码重置、安全策略配置

* **登录日志管理**：登录时间/IP/设备信息记录

* **账号安全监控**：异常登录检测、安全提醒

#### 3.10.2 角色及权限管理

* **角色生命周期**：角色新建/删除、角色配置管理

* **权限颗粒化控制**：按模块+子模块细分权限控制

* **权限继承机制**：角色权限继承、权限组合管理

* **权限审计功能**：权限变更记录、权限使用审计

### 3.11 系统设置模块

#### 3.11.1 系统日志

* **日志分类管理**：操作日志/错误日志/安全日志分类存储

* **日志检索功能**：日志筛选、关键词检索、时间范围查询

* **日志导出备份**：日志数据导出、定期备份策略

* **日志留存策略**：自动清理过期日志、存储空间管理

#### 3.11.2 通知设置

* **通知类型配置**：送检进度提醒、报告交付通知等类型设置

* **通知渠道配置**：短信/站内信/邮件多渠道通知配置

* **通知模板管理**：通知内容模板、个性化配置

* **通知规则设置**：通知触发条件、频率控制

#### 3.11.3 样本销毁时间设置

* **分类时间设置**：根据样本类型、检测产品、送检单位设置销毁天数

* **自动提醒配置**：销毁时间临近自动提醒设置

* **销毁规则管理**：销毁条件、例外情况处理规则

#### 3.11.4 样本类型设置

* **类型定义管理**：样本类型定义、分类标准设置

* **类型属性配置**：各类型样本的特殊属性、处理要求

* **类型关联设置**：样本类型与检测项目、产品的关联关系

#### 3.11.5 检测项目设置

* **项目基础配置**：单个检测项目的基础信息设置

* **参考范围设置**：检测项目参考范围上下限、性别年龄差异化设置

* **项目标准管理**：检测标准、方法学、质控要求设置

#### 3.11.6 检测产品设置

* **产品组合配置**：多个检测项目打包成产品的组合设置

* **耗材关联管理**：产品对应消耗耗材的关联配置

* **超时设置管理**：样本到样后X天内审核完成报告的时间设置

* **产品定价管理**：检测产品价格、成本核算设置

#### 3.11.7 送检单位设置

* **单位信息管理**：送检单位基础信息、联系方式管理

* **单位分类管理**：按单位类型、合作级别分类管理

* **合作协议管理**：合作协议、特殊要求、优惠政策管理

#### 3.11.8 实验员设置

* **账号绑定管理**：实验员与系统账号绑定关系管理

* **方法学绑定**：实验员与普检/质谱/特检方法学的绑定关系

* **技能认证管理**：实验员技能认证、资质管理

* **工作量统计**：实验员工作量、绩效统计管理

## 4. 项目实施优先级规划

### 4.1 模块依赖关系分析

#### 4.1.1 核心依赖关系
- **用户权限管理** → 所有功能模块（基础权限控制）
- **系统设置** → 送检管理、样本管理、实验管理、报告管理（基础配置数据）
- **送检管理** → 样本管理（送检申请是样本接收的前提）
- **样本管理** → 实验管理（样本出库是实验的前提）
- **实验管理** → 报告管理（实验数据是报告生成的基础）
- **实验室管理** → 实验管理（设备、耗材是实验执行的基础）

#### 4.1.2 配置依赖关系
- **样本类型设置** → 样本管理、送检管理
- **检测项目设置** → 检测产品设置、实验管理
- **检测产品设置** → 送检管理、实验管理、报告管理
- **实验员设置** → 实验管理
- **送检单位设置** → 送检管理

### 4.2 前端开发优先级（路由搭建阶段）

#### 4.2.1 F0级前端路由（基础框架，第1周）
1. **登录认证页面**：`/login`、`/logout`
2. **主框架布局**：侧边栏导航、顶部导航、面包屑
3. **首页框架**：`/dashboard`（空白页面，仅路由和布局）
4. **404错误页面**：`/404`
5. **权限拦截组件**：路由守卫、权限验证

#### 4.2.2 F1级前端路由（系统设置页面，第2周）
1. **系统设置主页**：`/settings`
2. **样本类型设置**：`/settings/sample-types`
3. **检测项目设置**：`/settings/test-items`
4. **检测产品设置**：`/settings/test-products`
5. **实验员设置**：`/settings/technicians`
6. **送检单位设置**：`/settings/client-units`
7. **用户权限管理**：`/settings/users`、`/settings/roles`

#### 4.2.3 F2级前端路由（核心业务页面，第3-4周）
1. **送检管理页面**：
   - `/submission/apply` - 送检申请
   - `/submission/progress` - 送检进度查询
   - `/submission/reports` - 报告交付
2. **样本管理页面**：
   - `/sample/receive` - 样本接收
   - `/sample/query` - 样本查询
   - `/sample/audit` - 样本审核
   - `/sample/outbound` - 样本出库
   - `/sample/inbound` - 样本入库
   - `/sample/destroy` - 样本销毁
3. **普检实验页面**：
   - `/experiment/routine` - 普检实验
   - `/experiment/routine/audit` - 普检数据审核
   - `/experiment/routine/exception` - 普检异常中心

#### 4.2.4 F3级前端路由（报告管理页面，第5周）
1. **报告管理页面**：
   - `/report/edit` - 报告编辑
   - `/report/generate` - 报告生成
   - `/report/audit` - 报告审核
   - `/report/delivery` - 报告交付管理
   - `/report/exception` - 报告异常中心

#### 4.2.5 F4级前端路由（实验室管理页面，第6周）
1. **实验室管理页面**：
   - `/lab/equipment` - 设备管理
   - `/lab/consumables` - 耗材管理
2. **质谱实验页面**：
   - `/experiment/mass-spec` - 质谱实验
   - `/experiment/mass-spec/audit` - 质谱数据审核
   - `/experiment/mass-spec/exception` - 质谱异常中心

#### 4.2.6 F5级前端路由（扩展功能页面，第7-8周）
1. **首页完善**：`/dashboard`（数据看板、通知中心、趋势分析）
2. **特检实验页面**：
   - `/experiment/special` - 湿实验
   - `/experiment/special/machine` - 上机管理
   - `/experiment/special/analysis` - 分析解读
   - `/experiment/special/exception` - 特检异常中心
3. **环境管理页面**：
   - `/environment/overview` - 实验室总览
   - `/environment/monitoring` - 环境参数监控
4. **系统设置扩展**：
   - `/settings/notifications` - 通知设置
   - `/settings/logs` - 系统日志
   - `/settings/destroy-rules` - 样本销毁时间设置

### 4.3 后端开发优先级（API开发阶段）

#### 4.3.1 B0级后端API（基础服务，第9-10周）
1. **用户认证服务**：
   - 用户登录/登出API
   - JWT令牌管理
   - 权限验证中间件
2. **用户权限管理API**：
   - 用户CRUD操作
   - 角色权限管理
   - 权限验证接口
3. **基础系统设置API**：
   - 样本类型管理API
   - 检测项目管理API
   - 检测产品管理API

#### 4.3.2 B1级后端API（核心业务API，第11-13周）
1. **送检管理API**：
   - 送检申请提交/查询/修改
   - 送检进度跟踪
   - 文件上传处理
2. **样本管理API**：
   - 样本接收/查询/审核
   - 样本出库/入库管理
   - 样本状态更新
3. **普检实验API**：
   - 实验数据录入/查询
   - 实验结果审核
   - 设备数据对接接口
4. **系统设置扩展API**：
   - 实验员管理API
   - 送检单位管理API

#### 4.3.3 B2级后端API（报告管理API，第14-15周）
1. **报告管理API**：
   - 报告模板管理
   - 报告生成/编辑/审核
   - 报告交付管理
   - 报告格式转换服务
2. **样本管理扩展API**：
   - 样本销毁管理
   - 样本销毁规则配置

#### 4.3.4 B3级后端API（实验室管理API，第16-17周）
1. **实验室管理API**：
   - 设备管理CRUD
   - 设备预约/使用记录
   - 耗材管理/库存预警
   - 维护计划管理
2. **质谱实验API**：
   - 质谱实验数据管理
   - 质谱数据审核
   - 质谱设备对接

#### 4.3.5 B4级后端API（数据分析API，第18-19周）
1. **首页数据API**：
   - 业务数据统计
   - 趋势分析数据
   - 实时通知推送
2. **异常处理API**：
   - 普检异常处理
   - 质谱异常处理
   - 报告异常处理

#### 4.3.6 B5级后端API（高级功能API，第20-22周）
1. **特检实验API**：
   - 湿实验管理
   - 上机预约管理
   - 分析解读协同
   - 特检异常处理
2. **环境管理API**：
   - 环境数据采集
   - 环境监控报警
   - 实验室总览数据
3. **系统管理API**：
   - 系统日志管理
   - 通知配置管理
   - 数据导出服务

### 4.4 集成测试优先级（第23-24周）

#### 4.4.1 I0级集成测试（核心流程）
1. **用户登录→系统设置→送检申请**完整流程测试
2. **送检申请→样本接收→普检实验→报告生成**核心业务流程测试
3. **权限控制**各角色权限验证测试

#### 4.4.2 I1级集成测试（扩展功能）
1. **质谱实验**完整流程测试
2. **实验室管理**设备耗材管理测试
3. **异常处理**各类异常流程测试

#### 4.4.3 I2级集成测试（高级功能）
1. **特检实验**完整流程测试
2. **环境监控**数据采集报警测试
3. **数据分析**统计报表功能测试

### 4.5 部署上线优先级（第25-26周）

#### 4.5.1 D0级部署（MVP版本）
- 用户权限管理
- 系统基础设置
- 送检管理核心功能
- 样本管理核心功能
- 普检实验管理
- 报告管理核心功能

#### 4.5.2 D1级部署（完整版本）
- 实验室管理
- 质谱实验管理
- 首页数据看板
- 异常处理中心

#### 4.5.3 D2级部署（增强版本）
- 特检实验管理
- 环境管理
- 高级数据分析
- 系统日志管理

## 5. 非功能性需求

### 5.1 性能要求

* **响应时间**：页面加载时间 < 3秒，查询响应时间 < 2秒

* **并发用户**：支持100个并发用户同时在线

* **数据处理**：支持单次处理10000条数据记录

* **系统可用性**：99.5%的系统可用性

### 5.2 安全要求

* **数据安全**：敏感数据加密存储，传输加密

* **访问控制**：基于角色的访问控制，操作日志记录

* **数据备份**：每日自动备份，异地备份存储

* **安全审计**：用户操作审计，异常行为监控

### 5.3 兼容性要求

* **浏览器兼容**：支持Chrome、Firefox、Safari、Edge最新版本

* **移动设备**：支持iOS、Android移动设备访问

* **数据库**：使用Supabase PostgreSQL云数据库

* **操作系统**：支持Windows、macOS、Linux操作系统

### 5.4 可扩展性要求

* **模块化设计**：支持功能模块独立部署和升级

* **API接口**：提供RESTful API接口，支持第三方集成

* **数据迁移**：支持数据导入导出，系统迁移

* **多租户支持**：支持多个实验室独立使用

## 6. 技术约束

### 6.1 技术栈要求

* **前端技术**：React + TypeScript + Ant Design

* **后端技术**：Java + Spring Boot + Spring Security

* **数据库**：Supabase PostgreSQL（smartlis库）

* **部署方式**：前后端分离部署

### 6.2 开发约束

* **代码规范**：遵循团队代码规范，添加中文注释

* **版本控制**：使用Git进行版本控制

* **测试要求**：单元测试覆盖率 > 80%

* **文档要求**：完整的API文档和用户手册

## 7. 项目里程碑

### 7.1 第一阶段（MVP版本）

* **时间周期**：6-8周

* **核心功能**：用户管理、送检管理、样本管理、普检实验、报告管理

* **交付目标**：可用的基础版本，支持核心业务流程

### 7.2 第二阶段（完整版本）

* **时间周期**：8-10周

* **增强功能**：首页看板、质谱实验、实验室管理、系统设置完善

* **交付目标**：功能完整的生产版本

### 7.3 第三阶段（优化版本）

* **时间周期**：6-8周

* **扩展功能**：特检实验、环境管理、异常中心、高级分析

* **交付目标**：用户体验优化，功能扩展

## 8. 风险评估

### 8.1 技术风险

* **数据库性能**：大量数据查询可能影响性能

* **系统集成**：前后端集成复杂度较高

* **设备对接**：与实验设备对接的技术复杂性

* **数据安全**：敏感数据保护要求严格

### 8.2 业务风险

* **需求变更**：实验室业务需求可能频繁变更

* **用户接受度**：新系统用户接受度不确定

* **数据迁移**：现有数据迁移风险

* **业务流程**：复杂业务流程的系统化风险

### 8.3 项目风险

* **时间风险**：开发周期可能延长

* **资源风险**：开发资源可能不足

* **质量风险**：功能复杂度可能影响质量

* **集成风险**：多模块集成的复杂性风险

## 9. 成功标准

### 9.1 功能标准

* 所有P0级功能100%实现

* 所有P1级功能90%实现

* 系统稳定运行，无重大Bug

* 业务流程完整覆盖

### 9.2 性能标准

* 系统响应时间满足要求

* 支持预期并发用户数

* 系统可用性达到99.5%

* 数据处理能力满足业务需求

### 9.3 用户满意度标准

* 用户培训完成率 > 90%

* 用户满意度评分 > 4.0/5.0

* 系统使用率 > 80%

* 业务效率提升 > 30%

